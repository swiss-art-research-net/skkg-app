<ol class="page-breadcrumb">
    <li>
      <mp-link title="Home" url="/">Home</mp-link>
    </li>
    <li class="active">
      <mp-label iri='[[this]]'></mp-label>
    </li>
  </ol>
  
<style>
  #tabs .tab-ontodia {
    margin: 0px;
    padding: 2px 0px 0px;
    width: 100%;
    height: calc(100vh - 300px);
  }
</style>

<div class="page">
  [[#if (ask "ASK { {SELECT * WHERE {?? ?p ?o}LIMIT 1}UNION {SELECT * WHERE {?s ?? ?o}LIMIT 1}UNION {SELECT * WHERE {?s ?p ??}LIMIT 1}UNION{ {SELECT * WHERE {?a ?p ?o. FILTER(??=<Template:http://www.w3.org/2000/01/rdf-schema#Resource> )} LIMIT 1} } }")]]
    <div class='page__header-navtabs'>
      [[> Platform:DefaultResourceHeader]]
    </div>
    <bs-tabs id="tabs" class='page__body-navtabs' unmount-on-exit=true>
      <bs-tab event-key="fields" title="Fields">
        [[> module-field-visualisation]]
      </bs-tab>
      <bs-tab event-key="image" title="Images">
        [[> module-images ]]
      </bs-tab>
      <bs-tab event-key="graph" class="tab-ontodia" title="Knowledge Graph">
        <ontodia id='ontodia' hide-toolbar=true hide-panels=true hide-scroll-bars=true hide-navigation-confirmation=true auto-zoom=true settings=nostats iri='[[this]]'></ontodia>
      </bs-tab>
      <bs-tab event-key="statements" title="Source">
        [[> Platform:SourceStatements]]
      </bs-tab>
    </bs-tabs>
  [[else]]
  <div class='page__body'>
    <p>
      It seems that no entity with IRI <code>"[[this]]"</code> in any subject, predicate or object position is known in the knowledge graph. Also no static application page with this identifier can be found.
    </p>
    <p>
      Click on the edit button (<i class="fa fa-pencil"></i>) in the top right of this page (<i>only visible if the respective ACL permissions are being granted to you</i>) to create a new, static application page with this identifier.
    </p>
  </div>
  [[/if]]
</div>

[[#*inline "module-images"]]

  <div class="skkg-component card-container entity-details-images">
    <semantic-query
      query="SELECT ?iiif WHERE {
        BIND(<[[this]]> AS ?subject)
        ?subject la:digitally_shown_by/la:digitally_available_via/la:access_point ?iiif
      }"
      template='{{> template-images }}'
    >
      <template id="template-images">
        {{#each bindings}}
          <mp-overlay-dialog title="Image Viewer" type="modal" bs-size="large">
              <mp-overlay-dialog-trigger>
                <a href="{{iiif.value}}/full/max/0/default.jpg" class="skkg-component card"><img src="{{iiif.value}}/full/300,/0/default.jpg"/></a>
              </mp-overlay-dialog-trigger>
              <mp-overlay-dialog-content
                  id="image-modal">
                      <mp-page-loader 
                          iri="[[ resolvePrefix 'page:viewImage']]"
                          urlqueryparam-imageiri="{{iiif.value}}"
                          urlqueryparam-overlay="true"
                      ></mp-page-loader>
              </mp-overlay-dialog-content>
          </mp-overlay-dialog>
        {{/each}}
      </template>
    </semantic-query>
  </div>
[[/inline]]

[[#*inline "module-field-visualisation"]]
  [[> partial:fieldVisualisationTemplates ]]
  <mp-field-visualization
      subject="[[this]]"
      fields='[[> partial:fieldDefinitions ]]'
      template='{{> field-table-template }}'
  >
      [[> field-table-template]]
      
  </mp-field-visualization>
[[/inline]]